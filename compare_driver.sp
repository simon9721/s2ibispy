* =============================================================================
* IBIS vs SPICE Correlation Deck — driver
* Auto-generated by s2ibispy — 2025-11-22 23:21:03
* Vcc = 3.300V | Ccomp = 5e-12F
* Fall time (20-80%) = 0.260ns
* Rise time (20-80%) = 1.073ns

* Fixture load (from golden falling waveform): R = 50.000Ω to 0.000V

* =============================================================================

.OPTION POST PROBE ACCURATE RMAX=0.5
*.TEMP 27.0
.TEMP 50

* === Power Supplies — EXACTLY like real s2ibis3 (two sources) ===

Vsupply vdd 0 DC 3.3


Vgnd vss 0 DC 0



* === Include Transistor-Level Netlist ===
.INCLUDE "C:\Users\sh3qm\PycharmProjects\s2ibispy\buffer_sp_files\io_buf_subckt.sp"

* === Include Model File (hspice.mod) ===

.INCLUDE "hspice.mod"


* === Input Stimulus: Classic 101 Pattern — EXACTLY like reference deck ===
* High for 25ns → Low for 25ns → High again (period = 50ns)
Vin_spice in_spice 0 PULSE(3.3 0 0.1n 1.0p 1.0p 25.0n 50.0n)
Vin_ibis  in_ibis  0 PULSE(3.3 0 0.1n 1.0p 1.0p 25.0n 50.0n)

* === Output Enable Control — Automatic, respects active-high/low from .s2i ===

VENAS2I oe1 0 DC 3.3
VENAS2I2 oe2 0 DC 3.3
VENAS2I3 oe3 0 DC 3.3





* =============================================================================
* SPICE Side — 3 Identical Drivers
* =============================================================================

X1SPICE  in_spice  oe1 out1SPICE  sense1 vdd  vss    IO_buf
X2SPICE  vss       oe2 out2SPICE  sense2 vdd  vss    IO_buf
X3SPICE  in_spice  oe3 out3SPICE  sense3 vdd  vss    IO_buf


* =============================================================================
* IBIS Side — 3 Identical Drivers (8-node, fully compatible)
* =============================================================================

B1IBIS vcc1io gnd1io out1IBIS in_ibis vdd rcv1 vcc1_clamp gnd1_clamp
+ file='io_buf.ibs'
+ model='driver'
+ buffer=3
+ ramp_rwf=2
+ ramp_fwf=2
+ power=on
R1 rcv1 0 1k

Ccomp1 out1IBIS 0 5e-12


B2IBIS vcc2io gnd2io out2IBIS vss vdd rcv2 vcc2_clamp gnd2_clamp
+ file='io_buf.ibs'
+ model='driver'
+ buffer=3
+ ramp_rwf=2
+ ramp_fwf=2
+ power=on
R2 rcv2 0 1k

Ccomp2 out2IBIS 0 5e-12


B3IBIS vcc3io gnd3io out3IBIS in_ibis vdd rcv3 vcc3_clamp gnd3_clamp
+ file='io_buf.ibs'
+ model='driver'
+ buffer=3
+ ramp_rwf=2
+ ramp_fwf=2
+ power=on
R3 rcv3 0 1k

Ccomp3 out3IBIS 0 5e-12



* =============================================================================
* Transmission Lines — 50Ω lossless (EXACT match to reference)
* =============================================================================
* Using l=1.2 (inches) → ~180 ps delay → perfect for correlation
W_SPICE N=3 out1SPICE out2SPICE out3SPICE 0
+ end1SPICE end2SPICE end3SPICE 0
+ RLGCfile="C:\Users\sh3qm\PycharmProjects\s2ibispy\Z50_406.lc3" l=1.2 $ 50 Ohms

W_IBIS N=3 out1IBIS out2IBIS out3IBIS 0
+ end1IBIS end2IBIS end3IBIS 0
+ RLGCfile="C:\Users\sh3qm\PycharmProjects\s2ibispy\Z50_406.lc3" l=1.2 $ 50 Ohms

* =============================================================================
* Probe All Critical Nodes
* =============================================================================
.PROBE TRAN
+ V(in_spice) V(in_ibis)
+ V(out1SPICE) V(out1IBIS)
+ V(out2SPICE) V(out2IBIS)
+ V(out3SPICE) V(out3IBIS)
+ V(end1SPICE) V(end1IBIS)
+ V(end2SPICE) V(end2IBIS)
+ V(end3SPICE) V(end3IBIS)

* === Simulation Time ===
.TRAN 5.0ps 50.0ns

.END